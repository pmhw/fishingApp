# MySQL æ•°æ®åº“æ–‡ä»¶è¯´æ˜

æœ¬ç›®å½•åŒ…å«å°ç¨‹åºé¡¹ç›®æ‰€éœ€çš„ MySQL æ•°æ®åº“è¡¨ç»“æ„æ–‡ä»¶ã€‚

## ğŸ“ æ–‡ä»¶åˆ—è¡¨

### 1. `banner.sql`
**é¦–é¡µè½®æ’­å›¾è¡¨**

- **è¡¨å**: `banner`
- **ç”¨é€”**: å­˜å‚¨é¦–é¡µè½®æ’­å›¾æ•°æ®ï¼ŒåŒ…æ‹¬æ™®é€šè½®æ’­å›¾å’Œæ’è¡Œæ¦œè½®æ’­å›¾
- **ä¸»è¦å­—æ®µ**:
  - `id`: è½®æ’­å›¾IDï¼ˆä¸»é”®ï¼‰
  - `type`: ç±»å‹ï¼ˆbanner-æ™®é€šè½®æ’­å›¾, ranking-æ’è¡Œæ¦œè½®æ’­å›¾ï¼‰
  - `title`: æ ‡é¢˜
  - `image`: å›¾ç‰‡è·¯å¾„
  - `link_url`: è·³è½¬é“¾æ¥ï¼ˆå¯é€‰ï¼‰
  - `link_type`: é“¾æ¥ç±»å‹ï¼ˆpage-é¡µé¢, webview-ç½‘é¡µ, none-æ— é“¾æ¥ï¼‰
  - `sort_order`: æ’åºé¡ºåº
  - `status`: çŠ¶æ€ï¼ˆ1-å¯ç”¨, 0-ç¦ç”¨ï¼‰
  - `start_time`: å¼€å§‹æ—¶é—´
  - `end_time`: ç»“æŸæ—¶é—´
- **ç´¢å¼•**: type, status, sort_order
- **ç¤ºä¾‹æ•°æ®**: åŒ…å«3æ¡ç¤ºä¾‹æ•°æ®

---

### 2. `banner_ranking.sql`
**è½®æ’­å›¾æ’è¡Œæ¦œå…³è”è¡¨**

- **è¡¨å**: `banner_ranking`
- **ç”¨é€”**: å­˜å‚¨æ’è¡Œæ¦œè½®æ’­å›¾ä¸­çš„æ’è¡Œæ¦œæ•°æ®
- **ä¸»è¦å­—æ®µ**:
  - `id`: æ’è¡Œæ¦œIDï¼ˆä¸»é”®ï¼‰
  - `banner_id`: å…³è”çš„è½®æ’­å›¾IDï¼ˆå¤–é”®ï¼‰
  - `rank`: æ’åï¼ˆ1,2,3...ï¼‰
  - `user_name`: ç”¨æˆ·åç§°
  - `weight`: é‡é‡ï¼ˆå¦‚ï¼š8.5kgï¼‰
  - `spot_name`: é’“åœºåç§°
  - `user_id`: ç”¨æˆ·IDï¼ˆå¯é€‰ï¼Œå…³è”ç”¨æˆ·è¡¨ï¼‰
  - `spot_id`: é’“åœºIDï¼ˆå¯é€‰ï¼Œå…³è”é’“åœºè¡¨ï¼‰
- **ç´¢å¼•**: banner_id, rank, user_id, spot_id
- **å¤–é”®**: å…³è” `banner` è¡¨ï¼Œçº§è”åˆ é™¤å’Œæ›´æ–°
- **ç¤ºä¾‹æ•°æ®**: åŒ…å«3æ¡ç¤ºä¾‹æ•°æ®ï¼ˆå…³è”åˆ° banner_id=2ï¼‰

---

### 3. `import_all.sql`
**ç»Ÿä¸€å¯¼å…¥æ–‡ä»¶**

- **ç”¨é€”**: ä¸€æ¬¡æ€§å¯¼å…¥æ‰€æœ‰è¡¨ç»“æ„
- **è¯´æ˜**: è‡ªåŠ¨è®¾ç½®å­—ç¬¦é›†ã€å…³é—­å¤–é”®æ£€æŸ¥ã€å¯¼å…¥æ‰€æœ‰è¡¨ã€æ¢å¤å¤–é”®æ£€æŸ¥
- **ä½¿ç”¨æ–¹æ³•**: åœ¨ MySQL å‘½ä»¤è¡Œä¸­æ‰§è¡Œ `source import_all.sql;`

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹å¼ä¸€ï¼šç›´æ¥å¯¼å…¥ SQL æ–‡ä»¶

```bash
# ç™»å½• MySQL
mysql -u root -p

# é€‰æ‹©æ•°æ®åº“
USE your_database_name;

# å¯¼å…¥è½®æ’­å›¾è¡¨
source /path/to/mysql/banner.sql;

# å¯¼å…¥æ’è¡Œæ¦œå…³è”è¡¨
source /path/to/mysql/banner_ranking.sql;
```

### æ–¹å¼äºŒï¼šä½¿ç”¨ MySQL å®¢æˆ·ç«¯å·¥å…·

1. æ‰“å¼€ MySQL å®¢æˆ·ç«¯å·¥å…·ï¼ˆå¦‚ Navicatã€phpMyAdminã€MySQL Workbenchï¼‰
2. é€‰æ‹©ç›®æ ‡æ•°æ®åº“
3. æ‰§è¡Œ `banner.sql` æ–‡ä»¶
4. æ‰§è¡Œ `banner_ranking.sql` æ–‡ä»¶

### æ–¹å¼ä¸‰ï¼šå‘½ä»¤è¡Œå¯¼å…¥

```bash
mysql -u root -p your_database_name < mysql/banner.sql
mysql -u root -p your_database_name < mysql/banner_ranking.sql
```

### æ–¹å¼å››ï¼šç»Ÿä¸€å¯¼å…¥ï¼ˆæ¨èï¼‰

```bash
# ç™»å½• MySQL
mysql -u root -p

# é€‰æ‹©æ•°æ®åº“
USE your_database_name;

# è®¾ç½® SQL æ–‡ä»¶è·¯å¾„ï¼ˆWindows ä½¿ç”¨æ­£æ–œæ æˆ–åŒåæ–œæ ï¼‰
SOURCE C:/path/to/mysql/import_all.sql;
# æˆ– Linux/Mac
SOURCE /path/to/mysql/import_all.sql;
```

---

## ğŸ“Š è¡¨å…³ç³»è¯´æ˜

```
banner (è½®æ’­å›¾è¡¨)
  â”œâ”€â”€ id (ä¸»é”®)
  â””â”€â”€ type: 'ranking' ç±»å‹çš„è½®æ’­å›¾
       â””â”€â”€ banner_ranking (æ’è¡Œæ¦œå…³è”è¡¨)
            â””â”€â”€ banner_id (å¤–é”®) -> banner.id
```

**å…³ç³»è¯´æ˜**:
- `banner` è¡¨å­˜å‚¨æ‰€æœ‰è½®æ’­å›¾ï¼ˆåŒ…æ‹¬æ™®é€šè½®æ’­å›¾å’Œæ’è¡Œæ¦œè½®æ’­å›¾ï¼‰
- `banner_ranking` è¡¨åªå­˜å‚¨ `type='ranking'` çš„è½®æ’­å›¾å¯¹åº”çš„æ’è¡Œæ¦œæ•°æ®
- é€šè¿‡ `banner_id` å¤–é”®å…³è”ï¼Œæ”¯æŒçº§è”åˆ é™¤å’Œæ›´æ–°

---

## ğŸ” æŸ¥è¯¢ç¤ºä¾‹

### æŸ¥è¯¢æ‰€æœ‰å¯ç”¨çš„è½®æ’­å›¾ï¼ˆæŒ‰æ’åºï¼‰
```sql
SELECT * FROM banner 
WHERE status = 1 
ORDER BY sort_order ASC;
```

### æŸ¥è¯¢æ’è¡Œæ¦œè½®æ’­å›¾åŠå…¶æ’è¡Œæ¦œæ•°æ®
```sql
SELECT 
  b.id,
  b.title,
  br.rank,
  br.user_name,
  br.weight,
  br.spot_name
FROM banner b
LEFT JOIN banner_ranking br ON b.id = br.banner_id
WHERE b.type = 'ranking' AND b.status = 1
ORDER BY b.sort_order, br.rank;
```

### æŸ¥è¯¢æ™®é€šè½®æ’­å›¾
```sql
SELECT * FROM banner 
WHERE type = 'banner' AND status = 1 
ORDER BY sort_order ASC;
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å­—ç¬¦é›†**: æ‰€æœ‰è¡¨ä½¿ç”¨ `utf8mb4` å­—ç¬¦é›†ï¼Œæ”¯æŒ emoji å’Œç‰¹æ®Šå­—ç¬¦
2. **æ—¶åŒº**: æ—¶é—´å­—æ®µä½¿ç”¨ `TIMESTAMP` ç±»å‹ï¼Œè‡ªåŠ¨å¤„ç†æ—¶åŒº
3. **å¤–é”®çº¦æŸ**: `banner_ranking` è¡¨çš„å¤–é”®è®¾ç½®ä¸ºçº§è”åˆ é™¤å’Œæ›´æ–°
4. **ç´¢å¼•ä¼˜åŒ–**: å·²ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µåˆ›å»ºç´¢å¼•ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½
5. **ç¤ºä¾‹æ•°æ®**: SQL æ–‡ä»¶ä¸­åŒ…å«ç¤ºä¾‹æ•°æ®ï¼Œå¯¼å…¥åå¯ç›´æ¥æŸ¥çœ‹æ•ˆæœ

---

## ğŸ”„ åç»­æ‰©å±•

å¦‚éœ€æ·»åŠ æ›´å¤šè¡¨ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ ¼å¼åˆ›å»ºï¼š
1. åˆ›å»ºå¯¹åº”çš„ `.sql` æ–‡ä»¶
2. åœ¨ `README.md` ä¸­æ·»åŠ æ–‡ä»¶è¯´æ˜
3. ä¿æŒå‘½åè§„èŒƒå’Œæ³¨é‡Šè§„èŒƒä¸€è‡´

---

**æœ€åæ›´æ–°**: 2026-02-08
