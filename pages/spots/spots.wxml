<!--pages/spots/spots.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨æœç´¢æ  -->
  <view class="search-header">
    <view class="search-box">
      <text class="search-icon">ğŸ”</text>
      <input class="search-input" placeholder="æœç´¢é’“åœºåç§°ã€åœ°å€..." bindinput="onSearchInput" value="{{searchKeyword}}" />
      <text class="search-clear" wx:if="{{searchKeyword}}" bindtap="onClearSearch">âœ•</text>
    </view>
  </view>

  <!-- ç­›é€‰æ  -->
  <view class="filter-bar">
    <view class="filter-item" bindtap="onFilterTap" data-type="sort">
      <text class="filter-text">{{sortText}}</text>
      <text class="filter-arrow">â–¼</text>
    </view>
    <view class="filter-item" bindtap="onFilterTap" data-type="price">
      <text class="filter-text">{{priceText}}</text>
      <text class="filter-arrow">â–¼</text>
    </view>
    <view class="filter-item" bindtap="onFilterTap" data-type="distance">
      <text class="filter-text">{{distanceText}}</text>
      <text class="filter-arrow">â–¼</text>
    </view>
  </view>

  <!-- é’“åœºåˆ—è¡¨ -->
  <view class="spot-list">
    <view 
      class="spot-card" 
      wx:for="{{displaySpots}}" 
      wx:key="id"
      bindtap="onSpotTap"
      data-spot="{{item}}"
    >
      <view class="spot-image-wrapper">
        <view class="spot-image">
          <text class="image-placeholder">ğŸ£</text>
        </view>
        <view class="spot-rating-badge">
          <text class="rating-star">â­</text>
          <text class="rating-value">{{item.rating}}</text>
        </view>
        <view class="spot-distance-badge">
          <text class="distance-text">ğŸ“ {{item.distance}}</text>
        </view>
      </view>
      
      <view class="spot-content">
        <view class="spot-header">
          <text class="spot-name">{{item.name}}</text>
        </view>
        
        <text class="spot-address">{{item.address}}</text>
        
        <!-- æ ‡ç­¾ -->
        <view class="spot-tags">
          <view class="tag-item" wx:if="{{item.hasWifi}}">
            <text class="tag-icon">ğŸ“¶</text>
            <text class="tag-text">WiFi</text>
          </view>
          <view class="tag-item" wx:if="{{item.hasParking}}">
            <text class="tag-icon">ğŸ…¿ï¸</text>
            <text class="tag-text">åœè½¦åœº</text>
          </view>
          <view class="tag-item" wx:if="{{item.hasToilet}}">
            <text class="tag-icon">ğŸš»</text>
            <text class="tag-text">å«ç”Ÿé—´</text>
          </view>
          <view class="tag-item" wx:if="{{item.hasRestaurant}}">
            <text class="tag-icon">ğŸ½ï¸</text>
            <text class="tag-text">é¤é¥®</text>
          </view>
        </view>
        
        <!-- åº•éƒ¨ä¿¡æ¯ -->
        <view class="spot-footer">
          <view class="spot-price-wrapper">
            <text class="price-text">{{item.price}}</text>
          </view>
          <view class="spot-actions">
            <view class="action-btn phone-btn" bindtap="onCallPhone" data-phone="{{item.phone}}" catchtap="true">
              <text class="btn-icon">ğŸ“</text>
              <text class="btn-text">ç”µè¯</text>
            </view>
            <view class="action-btn navigate-btn" bindtap="onNavigate" data-spot="{{item}}" catchtap="true">
              <text class="btn-icon">ğŸ§­</text>
              <text class="btn-text">å¯¼èˆª</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{displaySpots.length === 0}}">
    <text class="empty-icon">ğŸ£</text>
    <text class="empty-text">æš‚æ— é’“åœºä¿¡æ¯</text>
  </view>
</view>
